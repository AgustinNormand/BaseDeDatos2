OBJETIVO, MOSTRAR LA DIFERENCIA ENTRE UNA ENTIDAD ADMINISTRADA Y UNA NO ADMINISTRADA.


private EntityManagerFactory emf = Persistence.creatEntityManagerFactory("DatabaseName");

EntityManager man = emf.createEntityManager();
Factura f = new Factura(1,1000);
man.getTransaction().begin();
man.persist(f);

/*
El metodo persist convirtio a la Factura f en una entidad "Managed"
Si realizo cambios en la factura aca, se ven reflejados en la base de datos ya que la entidad se encuentra en estado "Managed"
*/

man.getTransaction().commit();
man.close() //El metodo close persiste todas las entidades en la base de datos, y las pasa a todas a estado Detached.


EntityManager man = emf.createEntityManager();
man.getTransaction().begin();
/*
Si realizo cambios en la factura aca, no se ven reflejados en la base de datos ya que la entidad se encuentra en estado "Detached"
Para poder pasar a una entidad de estado Detached a estado Managed, se utiliza MERGE.
*/
man.getTransaction().commit();
man.close();


f = man.merge(f)
/*
Una vez realizado el merge los cambios se ver√°n reflejados en la base de datos, no importa si los cambios se realizaron antes o despues de la sentencia Merge, siempre y cuando esten dentro de la misma transaccion.
*/



